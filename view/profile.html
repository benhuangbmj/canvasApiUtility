<!DOCTYPE html>

<html lang='en'>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Canvas Extended Applications</title>
    <script 
      src="https://code.jquery.com/jquery-3.6.3.js" 
      integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" 
      crossorigin="anonymous">      
    </script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->
    <link 
      rel="stylesheet" 
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" 
      crossorigin="anonymous"/>
    <link 
      rel="stylesheet" 
      href="//use.fontawesome.com/releases/v5.0.7/css/all.css"/>
    <link rel='icon' href='favicon.png' type='image/x-icon' />
  </head>
  <body>
    <main>      
      <div class='container-fluid' id='greeting' style="text-align: center; height: 5em; padding-top: 1.75em; font-size: 1.5em; width: 80vw; margin: auto"></div>
      <div style='width: 80vw; margin: auto' class='container-fluid' id='service-list'></div>
    </main>
    <script type='module'>
      import greeting from './components/greeting.js';
      import serviceList from './components/service_list.js';
      $(document).ready(function() {
        const myMQL = window.matchMedia('(min-width: 640px)');
        serviceList(myMQL);
        fetch('/user')
          .then(res => res.json())
          .then(profile => {
            greeting(profile, myMQL);
            sessionStorage.setItem('profile', JSON.stringify(profile));
            serviceList(myMQL, true);
          })        
      })      
    </script>    
  </body>
</html>